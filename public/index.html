<!DOCTYPE HTML>
<html>
<head>
    <title>ilmongc</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <noscript><link rel="stylesheet" href="oscript.css" /></noscript>
    <link rel="stylesheet" href="assets/css/main.css">
</head>
<body class="is-preload">

    <div id="wrapper">
        <h1>M O O Z O M B I E</h1>

        <div id="footer">
            <ul class="copyright">
                <li>&copy; Moonfall 2022 Movies Wallpaper</li>
            </ul>
            <div class="custom-links">
                <a href="https://www.instagram.com/moozombi/" class="link" id="link1">insta</a>
                <span class="separator" id="separator1">|</span>
                <a href="https://github.com/ilmong06" class="link" id="link2">github</a>
                <span class="separator" id="separator2">|</span>
                <a href="#" class="link" id="link3">blog</a>
                <span class="separator" id="separator3">|</span>
                <a href="https://velog.io/@ilmongcode/posts" class="link" id="link4">velog</a>
                <div class="link" id="welcomeMessage"></div>
            </div>
        </div>

        <a href="https://yourlink.com" class="link-to-hide" id="desktopLink">pc버전</a>
        <div class="auth-buttons"></div>

        <a href="/html/sign-up2.html" class="join">join</a>
        <a href="/html/login2.html" class="login">login</a>
        <a href="javascript:void(0);" id="logoutLink" class="logout">logout</a>
    </div>

    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js';
        import { getAuth, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/9.1.3/firebase-auth.js';

        const firebaseConfig = {
            apiKey: 'AIzaSyAfiRIkNZesOTlkfQTWizBqdDkjmWJQvRo',
            authDomain: "ilmongblog.firebaseapp.com",
            projectId: "ilmongblog",
            storageBucket: "ilmongblog.appspot.com",
            messagingSenderId: "25466040786",
            appId: "1:25466040786:web:24b5dd6019a7118a80d80b"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        document.addEventListener('DOMContentLoaded', () => {
            onAuthStateChanged(auth, (user) => {
                const welcomeMessageDiv = document.getElementById('welcomeMessage');

                if (user) {
                    const displayName = user.displayName || user.email.split('@')[0];
                    welcomeMessageDiv.innerHTML = `<h2>${displayName}님! 안녕하세요!</h2>`;
                } else {
                    welcomeMessageDiv.innerHTML = '<h2>로그인하지 않으셨습니다.</h2>';
                }
            });

            // 로그아웃 처리
            document.getElementById('logoutLink').addEventListener('click', (event) => {
                event.preventDefault(); // 기본 링크 클릭 동작 방지
                signOut(auth).then(() => {
                    window.location.href = "/"; // Redirect to homepage or desired page
                }).catch((error) => {
                    console.error("로그아웃 중 오류 발생:", error);
                });
            });
        });
    </script>
</body>
</html>